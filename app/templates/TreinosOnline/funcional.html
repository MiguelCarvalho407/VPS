{% extends 'FC_APP/fcBase.html' %}
{% load static %}

{% block content %}
<style>
    .treinos-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        padding: 40px 20px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .treino-card {
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
    }

    .treino-card:hover {
        transform: translateY(-5px);
    }

    .treino-card img {
        width: 100%;
        height: 180px;
        object-fit: cover;
    }

    .treino-info {
        padding: 16px;
        display: flex;
        flex-direction: column;
        flex: 1;
    }

    .treino-info h3 {
        margin-bottom: 10px;
        color: #11101b;
        font-size: 20px;
    }

    .treino-info .tipo {
        font-weight: bold;
        color: #666;
        margin-bottom: 10px;
    }

    .treino-info .descricao {
        font-size: 14px;
        color: #555;
        flex-grow: 1;
        margin-bottom: 15px;
    }

    .btn-ver {
        align-self: flex-start;
        background-color: #11101b;
        color: #fefefe;
        padding: 8px 16px;
        border-radius: 6px;
        text-decoration: none;
        transition: background-color 0.2s ease;
    }

    .btn-apagar{
        align-self: flex-start;
        background-color: #ad3434;
        color: #fefefe;
        padding: 8px 16px;
        border-radius: 6px;
        text-decoration: none;
        border: none;
        cursor: pointer;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<div class="treinos-container">
    {% for funcional in funcionais %}
    <div class="treino-card">
        <img src="{{ funcional.thumbnail.url }}" alt="{{ funcional.titulo }}">
        <div class="treino-info">
            <h3>{{ funcional.titulo }}</h3>
            <p class="tipo">{{ funcional.get_tipo_treino_display }}</p>
            <p class="descricao">{{ funcional.descricao }}</p>
            <a href="{{ funcional.link_yt }}" target="_blank" class="btn-ver">Ver no YouTube</a>

            {% if request.user.is_staff %}
            <form method="post" action="{% url 'apagar_funcionais_online' funcional.id %}" class="delete-form" style="margin-top: 10px;">
                {% csrf_token %}
                <button type="button" data-id="{{ funcional.id }}" class="btn-apagar">üóëÔ∏è Apagar</button>
            </form>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p style="text-align: center; margin-top: 40px; font-size: 18px;">Ainda n√£o foram adicionados treinos online.</p>
    {% endfor %}
</div>

<script>
    document.querySelectorAll('.btn-apagar').forEach(button => {
        button.addEventListener('click', function () {
            const form = this.closest('form');

            Swal.fire({
                title: 'Tens a certeza?',
                text: "Ao continuar o Treino Online ser√° apagado",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Confirmar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    form.submit();
                }
            });
        });
    });
</script>
{% endblock %}